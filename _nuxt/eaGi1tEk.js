import{j as W,F as $,l as R,n as q,s as J,q as te,r as m,J as L,A as ae,cD as A,d8 as K,a as B,c as M,w as G,$ as se,b as O,C as P,e as g,D,a0 as le,aI as oe,ct as Q,B as Z,d as F,a9 as re,k as ne,aD as ie,V as k,as as I,x as U,z as ce,y as V,P as ue,Y as ve,es as fe,o as de,K as me,Q as pe,au as he,a1 as ye,dS as be,a2 as ge,cJ as Se}from"./CDmb9vfD.js";const C=4,we={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},ze=({move:a,size:t,bar:s})=>({[s.size]:t,transform:"translate".concat(s.axis,"(").concat(a,"%)")}),j=Symbol("scrollbarContextKey"),Ee=W({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),_e="Thumb",He=R({__name:"thumb",props:Ee,setup(a){const t=a,s=q(j),l=J("scrollbar");s||te(_e,"can not inject scrollbar context");const i=m(),c=m(),v=m({}),f=m(!1);let p=!1,y=!1,r=Q?document.onselectstart:null;const o=L(()=>we[t.vertical?"vertical":"horizontal"]),n=L(()=>ze({size:t.size,move:t.move,bar:o.value})),d=L(()=>i.value[o.value.offset]**2/s.wrapElement[o.value.scrollSize]/t.ratio/c.value[o.value.offset]),h=u=>{var E;if(u.stopPropagation(),u.ctrlKey||[1,2].includes(u.button))return;(E=window.getSelection())==null||E.removeAllRanges(),w(u);const T=u.currentTarget;T&&(v.value[o.value.axis]=T[o.value.offset]-(u[o.value.client]-T.getBoundingClientRect()[o.value.direction]))},H=u=>{if(!c.value||!i.value||!s.wrapElement)return;const E=Math.abs(u.target.getBoundingClientRect()[o.value.direction]-u[o.value.client]),T=c.value[o.value.offset]/2,N=(E-T)*100*d.value/i.value[o.value.offset];s.wrapElement[o.value.scroll]=N*s.wrapElement[o.value.scrollSize]/100},w=u=>{u.stopImmediatePropagation(),p=!0,document.addEventListener("mousemove",S),document.addEventListener("mouseup",b),r=document.onselectstart,document.onselectstart=()=>!1},S=u=>{if(!i.value||!c.value||p===!1)return;const E=v.value[o.value.axis];if(!E)return;const T=(i.value.getBoundingClientRect()[o.value.direction]-u[o.value.client])*-1,N=c.value[o.value.offset]-E,ee=(T-N)*100*d.value/i.value[o.value.offset];s.wrapElement[o.value.scroll]=ee*s.wrapElement[o.value.scrollSize]/100},b=()=>{p=!1,v.value[o.value.axis]=0,document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",b),e(),y&&(f.value=!1)},x=()=>{y=!1,f.value=!!t.size},z=()=>{y=!0,f.value=p};ae(()=>{e(),document.removeEventListener("mouseup",b)});const e=()=>{document.onselectstart!==r&&(document.onselectstart=r)};return A(K(s,"scrollbarElement"),"mousemove",x),A(K(s,"scrollbarElement"),"mouseleave",z),(u,E)=>(B(),M(oe,{name:g(l).b("fade"),persisted:""},{default:G(()=>[se(O("div",{ref_key:"instance",ref:i,class:P([g(l).e("bar"),g(l).is(g(o).key)]),onMousedown:H},[O("div",{ref_key:"thumb",ref:c,class:P(g(l).e("thumb")),style:D(g(n)),onMousedown:h},null,38)],34),[[le,u.always||f.value]])]),_:1},8,["name"]))}});var Y=$(He,[["__file","thumb.vue"]]);const Te=W({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),Ce=R({__name:"bar",props:Te,setup(a,{expose:t}){const s=a,l=q(j),i=m(0),c=m(0),v=m(""),f=m(""),p=m(1),y=m(1);return t({handleScroll:n=>{if(n){const d=n.offsetHeight-C,h=n.offsetWidth-C;c.value=n.scrollTop*100/d*p.value,i.value=n.scrollLeft*100/h*y.value}},update:()=>{const n=l==null?void 0:l.wrapElement;if(!n)return;const d=n.offsetHeight-C,h=n.offsetWidth-C,H=d**2/n.scrollHeight,w=h**2/n.scrollWidth,S=Math.max(H,s.minSize),b=Math.max(w,s.minSize);p.value=H/(d-H)/(S/(d-S)),y.value=w/(h-w)/(b/(h-b)),f.value=S+C<d?"".concat(S,"px"):"",v.value=b+C<h?"".concat(b,"px"):""}}),(n,d)=>(B(),Z(re,null,[F(Y,{move:i.value,ratio:y.value,size:v.value,always:n.always},null,8,["move","ratio","size","always"]),F(Y,{move:c.value,ratio:p.value,size:f.value,vertical:"",always:n.always},null,8,["move","ratio","size","always"])],64))}});var Le=$(Ce,[["__file","bar.vue"]]);const ke=W({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:ne([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},id:String,role:String,...ie(["ariaLabel","ariaOrientation"])}),Be={scroll:({scrollTop:a,scrollLeft:t})=>[a,t].every(k)},Pe="ElScrollbar",Re=R({name:Pe}),xe=R({...Re,props:ke,emits:Be,setup(a,{expose:t,emit:s}){const l=a,i=J("scrollbar");let c,v,f=0,p=0;const y=m(),r=m(),o=m(),n=m(),d=L(()=>{const e={};return l.height&&(e.height=I(l.height)),l.maxHeight&&(e.maxHeight=I(l.maxHeight)),[l.wrapStyle,e]}),h=L(()=>[l.wrapClass,i.e("wrap"),{[i.em("wrap","hidden-default")]:!l.native}]),H=L(()=>[i.e("view"),l.viewClass]),w=()=>{var e;r.value&&((e=n.value)==null||e.handleScroll(r.value),f=r.value.scrollTop,p=r.value.scrollLeft,s("scroll",{scrollTop:r.value.scrollTop,scrollLeft:r.value.scrollLeft}))};function S(e,u){be(e)?r.value.scrollTo(e):k(e)&&k(u)&&r.value.scrollTo(e,u)}const b=e=>{k(e)&&(r.value.scrollTop=e)},x=e=>{k(e)&&(r.value.scrollLeft=e)},z=()=>{var e;(e=n.value)==null||e.update()};return U(()=>l.noresize,e=>{e?(c==null||c(),v==null||v()):({stop:c}=ce(o,z),v=A("resize",z))},{immediate:!0}),U(()=>[l.maxHeight,l.height],()=>{l.native||V(()=>{var e;z(),r.value&&((e=n.value)==null||e.handleScroll(r.value))})}),ue(j,ve({scrollbarElement:y,wrapElement:r})),fe(()=>{r.value.scrollTop=f,r.value.scrollLeft=p}),de(()=>{l.native||V(()=>{z()})}),me(()=>z()),t({wrapRef:r,update:z,scrollTo:S,setScrollTop:b,setScrollLeft:x,handleScroll:w}),(e,u)=>(B(),Z("div",{ref_key:"scrollbarRef",ref:y,class:P(g(i).b())},[O("div",{ref_key:"wrapRef",ref:r,class:P(g(h)),style:D(g(d)),onScroll:w},[(B(),M(he(e.tag),{id:e.id,ref_key:"resizeRef",ref:o,class:P(g(H)),style:D(e.viewStyle),role:e.role,"aria-label":e.ariaLabel,"aria-orientation":e.ariaOrientation},{default:G(()=>[pe(e.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],38),e.native?ye("v-if",!0):(B(),M(Le,{key:0,ref_key:"barRef",ref:n,always:e.always,"min-size":e.minSize},null,8,["always","min-size"]))],2))}});var Ne=$(xe,[["__file","scrollbar.vue"]]);const Me=ge(Ne),_=new Map;if(Q){let a;document.addEventListener("mousedown",t=>a=t),document.addEventListener("mouseup",t=>{if(a){for(const s of _.values())for(const{documentHandler:l}of s)l(t,a);a=void 0}})}function X(a,t){let s=[];return Array.isArray(t.arg)?s=t.arg:Se(t.arg)&&s.push(t.arg),function(l,i){const c=t.instance.popperRef,v=l.target,f=i==null?void 0:i.target,p=!t||!t.instance,y=!v||!f,r=a.contains(v)||a.contains(f),o=a===v,n=s.length&&s.some(h=>h==null?void 0:h.contains(v))||s.length&&s.includes(f),d=c&&(c.contains(v)||c.contains(f));p||y||r||o||n||d||t.value(l,i)}}const Oe={beforeMount(a,t){_.has(a)||_.set(a,[]),_.get(a).push({documentHandler:X(a,t),bindingFn:t.value})},updated(a,t){_.has(a)||_.set(a,[]);const s=_.get(a),l=s.findIndex(c=>c.bindingFn===t.oldValue),i={documentHandler:X(a,t),bindingFn:t.value};l>=0?s.splice(l,1,i):s.push(i)},unmounted(a){_.delete(a)}};export{Oe as C,Me as E};
