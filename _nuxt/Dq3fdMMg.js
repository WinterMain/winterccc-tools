import{k as W,H as $,n as P,q as Y,y as G,x as te,r as m,L,C as ae,aF as M,bf as j,a as R,c as A,w as Z,a1 as se,b as O,F as B,e as g,G as D,a2 as le,ay as oe,aq as J,D as Q,d as K,ac as re,l as ne,b0 as ie,X as k,ca as U,z as X,B as ce,A as q,R as ue,$ as fe,cE as ve,o as de,M as me,S as pe,aC as he,a3 as ye,bZ as be,a4 as ge,aL as Se}from"./BSXGRQFZ.js";const C=4,we={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},ze=({move:a,size:t,bar:s})=>({[s.size]:t,transform:"translate".concat(s.axis,"(").concat(a,"%)")}),F=Symbol("scrollbarContextKey"),Ee=W({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),_e="Thumb",He=P({__name:"thumb",props:Ee,setup(a){const t=a,s=Y(F),l=G("scrollbar");s||te(_e,"can not inject scrollbar context");const i=m(),c=m(),f=m({}),v=m(!1);let p=!1,y=!1,r=J?document.onselectstart:null;const o=L(()=>we[t.vertical?"vertical":"horizontal"]),n=L(()=>ze({size:t.size,move:t.move,bar:o.value})),d=L(()=>i.value[o.value.offset]**2/s.wrapElement[o.value.scrollSize]/t.ratio/c.value[o.value.offset]),h=u=>{var E;if(u.stopPropagation(),u.ctrlKey||[1,2].includes(u.button))return;(E=window.getSelection())==null||E.removeAllRanges(),w(u);const T=u.currentTarget;T&&(f.value[o.value.axis]=T[o.value.offset]-(u[o.value.client]-T.getBoundingClientRect()[o.value.direction]))},H=u=>{if(!c.value||!i.value||!s.wrapElement)return;const E=Math.abs(u.target.getBoundingClientRect()[o.value.direction]-u[o.value.client]),T=c.value[o.value.offset]/2,N=(E-T)*100*d.value/i.value[o.value.offset];s.wrapElement[o.value.scroll]=N*s.wrapElement[o.value.scrollSize]/100},w=u=>{u.stopImmediatePropagation(),p=!0,document.addEventListener("mousemove",S),document.addEventListener("mouseup",b),r=document.onselectstart,document.onselectstart=()=>!1},S=u=>{if(!i.value||!c.value||p===!1)return;const E=f.value[o.value.axis];if(!E)return;const T=(i.value.getBoundingClientRect()[o.value.direction]-u[o.value.client])*-1,N=c.value[o.value.offset]-E,ee=(T-N)*100*d.value/i.value[o.value.offset];s.wrapElement[o.value.scroll]=ee*s.wrapElement[o.value.scrollSize]/100},b=()=>{p=!1,f.value[o.value.axis]=0,document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",b),e(),y&&(v.value=!1)},x=()=>{y=!1,v.value=!!t.size},z=()=>{y=!0,v.value=p};ae(()=>{e(),document.removeEventListener("mouseup",b)});const e=()=>{document.onselectstart!==r&&(document.onselectstart=r)};return M(j(s,"scrollbarElement"),"mousemove",x),M(j(s,"scrollbarElement"),"mouseleave",z),(u,E)=>(R(),A(oe,{name:g(l).b("fade"),persisted:""},{default:Z(()=>[se(O("div",{ref_key:"instance",ref:i,class:B([g(l).e("bar"),g(l).is(g(o).key)]),onMousedown:H},[O("div",{ref_key:"thumb",ref:c,class:B(g(l).e("thumb")),style:D(g(n)),onMousedown:h},null,38)],34),[[le,u.always||v.value]])]),_:1},8,["name"]))}});var I=$(He,[["__file","thumb.vue"]]);const Te=W({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),Ce=P({__name:"bar",props:Te,setup(a,{expose:t}){const s=a,l=Y(F),i=m(0),c=m(0),f=m(""),v=m(""),p=m(1),y=m(1);return t({handleScroll:n=>{if(n){const d=n.offsetHeight-C,h=n.offsetWidth-C;c.value=n.scrollTop*100/d*p.value,i.value=n.scrollLeft*100/h*y.value}},update:()=>{const n=l==null?void 0:l.wrapElement;if(!n)return;const d=n.offsetHeight-C,h=n.offsetWidth-C,H=d**2/n.scrollHeight,w=h**2/n.scrollWidth,S=Math.max(H,s.minSize),b=Math.max(w,s.minSize);p.value=H/(d-H)/(S/(d-S)),y.value=w/(h-w)/(b/(h-b)),v.value=S+C<d?"".concat(S,"px"):"",f.value=b+C<h?"".concat(b,"px"):""}}),(n,d)=>(R(),Q(re,null,[K(I,{move:i.value,ratio:y.value,size:f.value,always:n.always},null,8,["move","ratio","size","always"]),K(I,{move:c.value,ratio:p.value,size:v.value,vertical:"",always:n.always},null,8,["move","ratio","size","always"])],64))}});var Le=$(Ce,[["__file","bar.vue"]]);const ke=W({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:ne([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},id:String,role:String,...ie(["ariaLabel","ariaOrientation"])}),Re={scroll:({scrollTop:a,scrollLeft:t})=>[a,t].every(k)},Be="ElScrollbar",Pe=P({name:Be}),xe=P({...Pe,props:ke,emits:Re,setup(a,{expose:t,emit:s}){const l=a,i=G("scrollbar");let c,f,v=0,p=0;const y=m(),r=m(),o=m(),n=m(),d=L(()=>{const e={};return l.height&&(e.height=U(l.height)),l.maxHeight&&(e.maxHeight=U(l.maxHeight)),[l.wrapStyle,e]}),h=L(()=>[l.wrapClass,i.e("wrap"),{[i.em("wrap","hidden-default")]:!l.native}]),H=L(()=>[i.e("view"),l.viewClass]),w=()=>{var e;r.value&&((e=n.value)==null||e.handleScroll(r.value),v=r.value.scrollTop,p=r.value.scrollLeft,s("scroll",{scrollTop:r.value.scrollTop,scrollLeft:r.value.scrollLeft}))};function S(e,u){be(e)?r.value.scrollTo(e):k(e)&&k(u)&&r.value.scrollTo(e,u)}const b=e=>{k(e)&&(r.value.scrollTop=e)},x=e=>{k(e)&&(r.value.scrollLeft=e)},z=()=>{var e;(e=n.value)==null||e.update()};return X(()=>l.noresize,e=>{e?(c==null||c(),f==null||f()):({stop:c}=ce(o,z),f=M("resize",z))},{immediate:!0}),X(()=>[l.maxHeight,l.height],()=>{l.native||q(()=>{var e;z(),r.value&&((e=n.value)==null||e.handleScroll(r.value))})}),ue(F,fe({scrollbarElement:y,wrapElement:r})),ve(()=>{r.value.scrollTop=v,r.value.scrollLeft=p}),de(()=>{l.native||q(()=>{z()})}),me(()=>z()),t({wrapRef:r,update:z,scrollTo:S,setScrollTop:b,setScrollLeft:x,handleScroll:w}),(e,u)=>(R(),Q("div",{ref_key:"scrollbarRef",ref:y,class:B(g(i).b())},[O("div",{ref_key:"wrapRef",ref:r,class:B(g(h)),style:D(g(d)),onScroll:w},[(R(),A(he(e.tag),{id:e.id,ref_key:"resizeRef",ref:o,class:B(g(H)),style:D(e.viewStyle),role:e.role,"aria-label":e.ariaLabel,"aria-orientation":e.ariaOrientation},{default:Z(()=>[pe(e.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],38),e.native?ye("v-if",!0):(R(),A(Le,{key:0,ref_key:"barRef",ref:n,always:e.always,"min-size":e.minSize},null,8,["always","min-size"]))],2))}});var Ne=$(xe,[["__file","scrollbar.vue"]]);const Ae=ge(Ne),_=new Map;if(J){let a;document.addEventListener("mousedown",t=>a=t),document.addEventListener("mouseup",t=>{if(a){for(const s of _.values())for(const{documentHandler:l}of s)l(t,a);a=void 0}})}function V(a,t){let s=[];return Array.isArray(t.arg)?s=t.arg:Se(t.arg)&&s.push(t.arg),function(l,i){const c=t.instance.popperRef,f=l.target,v=i==null?void 0:i.target,p=!t||!t.instance,y=!f||!v,r=a.contains(f)||a.contains(v),o=a===f,n=s.length&&s.some(h=>h==null?void 0:h.contains(f))||s.length&&s.includes(v),d=c&&(c.contains(f)||c.contains(v));p||y||r||o||n||d||t.value(l,i)}}const Oe={beforeMount(a,t){_.has(a)||_.set(a,[]),_.get(a).push({documentHandler:V(a,t),bindingFn:t.value})},updated(a,t){_.has(a)||_.set(a,[]);const s=_.get(a),l=s.findIndex(c=>c.bindingFn===t.oldValue),i={documentHandler:V(a,t),bindingFn:t.value};l>=0?s.splice(l,1,i):s.push(i)},unmounted(a){_.delete(a)}};export{Oe as C,Ae as E};
