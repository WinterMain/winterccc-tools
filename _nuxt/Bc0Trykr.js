import{u as useCurrentFunc,_ as _sfc_main$1}from"./CoI3hynS.js";import{E as ElInput}from"./nzZkvIV0.js";import{_ as _sfc_main$2}from"./BdtFvTSO.js";import{n as computed,d as createTextVNode,b as createVNode,f as defineComponent,l as reactive,r as ref,B as watch,C as watchEffect,c as createElementBlock,u as unref,a as createBaseVNode,t as toDisplayString,i as isRef,e as useNuxtApp,o as openBlock}from"./DJrVflXo.js";import"./DwX7wo-C.js";import"./DQzqSjLK.js";import"./xONJjN0t.js";import"./ZAnb_GF2.js";const en_US={待格式化内容:"Content to be formatted",格式化结果:"Formatted result",请输入内容:"Please enter content",非法内容:"Illegal content"},zh_Hans_CN={待格式化内容:"待格式化内容",格式化结果:"格式化结果",请输入内容:"请输入内容",非法内容:"非法内容"},zh_Hant_HK={待格式化内容:"待格式化內容",格式化结果:"格式化結果",请输入内容:"請輸入內容",非法内容:"非法內容"},$VjsonformatMessages={en_US,zh_Hans_CN,zh_Hant_HK};var t={d:(e,V)=>{for(var _ in V)t.o(V,_)&&!t.o(e,_)&&Object.defineProperty(e,_,{enumerable:!0,get:V[_]})},o:(e,V)=>Object.prototype.hasOwnProperty.call(e,V)},n={};function o(e,V){(V==null||V>e.length)&&(V=e.length);for(var _=0,T=new Array(V);_<V;_++)T[_]=e[_];return T}function r(e,V){if(e){if(typeof e=="string")return o(e,V);var _=Object.prototype.toString.call(e).slice(8,-1);return _==="Object"&&e.constructor&&(_=e.constructor.name),_==="Map"||_==="Set"?Array.from(e):_==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_)?o(e,V):void 0}}function a(e){return function(V){if(Array.isArray(V))return o(V)}(e)||function(V){if(typeof Symbol<"u"&&V[Symbol.iterator]!=null||V["@@iterator"]!=null)return Array.from(V)}(e)||r(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function l(e,V,_){return V in e?Object.defineProperty(e,V,{value:_,enumerable:!0,configurable:!0,writable:!0}):e[V]=_,e}t.d(n,{Z:()=>j});const c=(s={computed:()=>computed,createTextVNode:()=>createTextVNode,createVNode:()=>createVNode,defineComponent:()=>defineComponent,reactive:()=>reactive,ref:()=>ref,watch:()=>watch,watchEffect:()=>watchEffect},p={},t.d(p,s),p),i=(0,c.defineComponent)({props:{data:{required:!0,type:String},onClick:Function},render:function(){var e=this.data,V=this.onClick;return(0,c.createVNode)("span",{class:"vjs-tree-brackets",onClick:V},[e])}}),u=(0,c.defineComponent)({emits:["change","update:modelValue"],props:{checked:{type:Boolean,default:!1},isMultiple:Boolean,onChange:Function},setup:function(e,V){var _=V.emit;return{uiType:(0,c.computed)(function(){return e.isMultiple?"checkbox":"radio"}),model:(0,c.computed)({get:function(){return e.checked},set:function(T){return _("update:modelValue",T)}})}},render:function(){var e=this.uiType,V=this.model,_=this.$emit;return(0,c.createVNode)("label",{class:["vjs-check-controller",V?"is-checked":""],onClick:function(T){return T.stopPropagation()}},[(0,c.createVNode)("span",{class:"vjs-check-controller-inner is-".concat(e)},null),(0,c.createVNode)("input",{checked:V,class:"vjs-check-controller-original is-".concat(e),type:e,onChange:function(){return _("change",V)}},null)])}}),d=(0,c.defineComponent)({props:{nodeType:{required:!0,type:String},onClick:Function},render:function(){var e=this.nodeType,V=this.onClick,_=e==="objectStart"||e==="arrayStart";return _||e==="objectCollapsed"||e==="arrayCollapsed"?(0,c.createVNode)("span",{class:"vjs-carets vjs-carets-".concat(_?"open":"close"),onClick:V},[(0,c.createVNode)("svg",{viewBox:"0 0 1024 1024",focusable:"false","data-icon":"caret-down",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},[(0,c.createVNode)("path",{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"},null)])]):null}});var s,p;function h(e){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},h(e)}function f(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function y(e){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"root",_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,T=arguments.length>3?arguments[3]:void 0,D=T||{},F=D.key,M=D.index,L=D.type,z=L===void 0?"content":L,$=D.showComma,Q=$!==void 0&&$,R=D.length,q=R===void 0?1:R,J=f(e);if(J==="array"){var W=v(e.map(function(I,E,O){return y(I,"".concat(V,"[").concat(E,"]"),_+1,{index:E,showComma:E!==O.length-1,length:q,type:z})}));return[y("[",V,_,{showComma:!1,key:F,length:e.length,type:"arrayStart"})[0]].concat(W,y("]",V,_,{showComma:Q,length:e.length,type:"arrayEnd"})[0])}if(J==="object"){var Y=Object.keys(e),G=v(Y.map(function(I,E,O){return y(e[I],/^[a-zA-Z_]\w*$/.test(I)?"".concat(V,".").concat(I):"".concat(V,'["').concat(I,'"]'),_+1,{key:I,showComma:E!==O.length-1,length:q,type:z})}));return[y("{",V,_,{showComma:!1,key:F,index:M,length:Y.length,type:"objectStart"})[0]].concat(G,y("}",V,_,{showComma:Q,length:Y.length,type:"objectEnd"})[0])}return[{content:e,level:_,key:F,index:M,path:V,showComma:Q,length:q,type:z}]}function v(e){if(typeof Array.prototype.flat=="function")return e.flat();for(var V=a(e),_=[];V.length;){var T=V.shift();Array.isArray(T)?V.unshift.apply(V,a(T)):_.push(T)}return _}function g(e){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new WeakMap;if(e==null)return e;if(e instanceof Date)return new Date(e);if(e instanceof RegExp)return new RegExp(e);if(h(e)!=="object")return e;if(V.get(e))return V.get(e);if(Array.isArray(e)){var _=e.map(function(F){return g(F,V)});return V.set(e,_),_}var T={};for(var D in e)T[D]=g(e[D],V);return V.set(e,T),T}function b(e,V){var _=Object.keys(e);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(e);V&&(T=T.filter(function(D){return Object.getOwnPropertyDescriptor(e,D).enumerable})),_.push.apply(_,T)}return _}function m(e){for(var V=1;V<arguments.length;V++){var _=arguments[V]!=null?arguments[V]:{};V%2?b(Object(_),!0).forEach(function(T){l(e,T,_[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(_)):b(Object(_)).forEach(function(T){Object.defineProperty(e,T,Object.getOwnPropertyDescriptor(_,T))})}return e}var C={showLength:{type:Boolean,default:!1},showDoubleQuotes:{type:Boolean,default:!0},renderNodeKey:Function,renderNodeValue:Function,selectableType:String,showSelectController:{type:Boolean,default:!1},showLine:{type:Boolean,default:!0},showLineNumber:{type:Boolean,default:!1},selectOnClickNode:{type:Boolean,default:!0},nodeSelectable:{type:Function,default:function(){return!0}},highlightSelectedNode:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!1},theme:{type:String,default:"light"},showKeyValueSpace:{type:Boolean,default:!0},editable:{type:Boolean,default:!1},editableTrigger:{type:String,default:"click"},onNodeClick:{type:Function},onBracketsClick:{type:Function},onIconClick:{type:Function},onValueChange:{type:Function}};const k=(0,c.defineComponent)({name:"TreeNode",props:m(m({},C),{},{node:{type:Object,required:!0},collapsed:Boolean,checked:Boolean,style:Object,onSelectedChange:{type:Function}}),emits:["nodeClick","bracketsClick","iconClick","selectedChange","valueChange"],setup:function(e,V){var _=V.emit,T=(0,c.computed)(function(){return f(e.node.content)}),D=(0,c.computed)(function(){return"vjs-value vjs-value-".concat(T.value)}),F=(0,c.computed)(function(){return e.showDoubleQuotes?'"'.concat(e.node.key,'"'):e.node.key}),M=(0,c.computed)(function(){return e.selectableType==="multiple"}),L=(0,c.computed)(function(){return e.selectableType==="single"}),z=(0,c.computed)(function(){return e.nodeSelectable(e.node)&&(M.value||L.value)}),$=(0,c.reactive)({editing:!1}),Q=function(E){var O,x,P=(x=(O=E.target)===null||O===void 0?void 0:O.value)==="null"?null:x==="undefined"?void 0:x==="true"||x!=="false"&&(x[0]+x[x.length-1]==='""'||x[0]+x[x.length-1]==="''"?x.slice(1,-1):typeof Number(x)=="number"&&!isNaN(Number(x))||x==="NaN"?Number(x):x);_("valueChange",P,e.node.path)},R=(0,c.computed)(function(){var E,O=(E=e.node)===null||E===void 0?void 0:E.content;return O===null?O="null":O===void 0&&(O="undefined"),T.value==="string"?'"'.concat(O,'"'):O+""}),q=function(){var E=e.renderNodeValue;return E?E({node:e.node,defaultValue:R.value}):R.value},J=function(){_("bracketsClick",!e.collapsed,e.node)},W=function(){_("iconClick",!e.collapsed,e.node)},Y=function(){_("selectedChange",e.node)},G=function(){_("nodeClick",e.node),z.value&&e.selectOnClickNode&&_("selectedChange",e.node)},I=function(E){if(e.editable&&!$.editing){$.editing=!0;var O=function x(P){var B;P.target!==E.target&&((B=P.target)===null||B===void 0?void 0:B.parentElement)!==E.target&&($.editing=!1,document.removeEventListener("click",x))};document.removeEventListener("click",O),document.addEventListener("click",O)}};return function(){var E,O=e.node;return(0,c.createVNode)("div",{class:{"vjs-tree-node":!0,"has-selector":e.showSelectController,"has-carets":e.showIcon,"is-highlight":e.highlightSelectedNode&&e.checked,dark:e.theme==="dark"},onClick:G,style:e.style},[e.showLineNumber&&(0,c.createVNode)("span",{class:"vjs-node-index"},[O.id+1]),e.showSelectController&&z.value&&O.type!=="objectEnd"&&O.type!=="arrayEnd"&&(0,c.createVNode)(u,{isMultiple:M.value,checked:e.checked,onChange:Y},null),(0,c.createVNode)("div",{class:"vjs-indent"},[Array.from(Array(O.level)).map(function(x,P){return(0,c.createVNode)("div",{key:P,class:{"vjs-indent-unit":!0,"has-line":e.showLine}},null)}),e.showIcon&&(0,c.createVNode)(d,{nodeType:O.type,onClick:W},null)]),O.key&&(0,c.createVNode)("span",{class:"vjs-key"},[(E=e.renderNodeKey,E?E({node:e.node,defaultKey:F.value||""}):F.value),(0,c.createVNode)("span",{class:"vjs-colon"},[":".concat(e.showKeyValueSpace?" ":"")])]),(0,c.createVNode)("span",null,[O.type!=="content"&&O.content?(0,c.createVNode)(i,{data:O.content.toString(),onClick:J},null):(0,c.createVNode)("span",{class:D.value,onClick:!e.editable||e.editableTrigger&&e.editableTrigger!=="click"?void 0:I,onDblclick:e.editable&&e.editableTrigger==="dblclick"?I:void 0},[e.editable&&$.editing?(0,c.createVNode)("input",{value:R.value,onChange:Q,style:{padding:"3px 8px",border:"1px solid #eee",boxShadow:"none",boxSizing:"border-box",borderRadius:5,fontFamily:"inherit"}},null):q()]),O.showComma&&(0,c.createVNode)("span",null,[","]),e.showLength&&e.collapsed&&(0,c.createVNode)("span",{class:"vjs-comment"},[(0,c.createTextVNode)(" // "),O.length,(0,c.createTextVNode)(" items ")])])])}}});function w(e,V){var _=Object.keys(e);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(e);V&&(T=T.filter(function(D){return Object.getOwnPropertyDescriptor(e,D).enumerable})),_.push.apply(_,T)}return _}function N(e){for(var V=1;V<arguments.length;V++){var _=arguments[V]!=null?arguments[V]:{};V%2?w(Object(_),!0).forEach(function(T){l(e,T,_[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(_)):w(Object(_)).forEach(function(T){Object.defineProperty(e,T,Object.getOwnPropertyDescriptor(_,T))})}return e}const j=(0,c.defineComponent)({name:"Tree",props:N(N({},C),{},{data:{type:[String,Number,Boolean,Array,Object],default:null},collapsedNodeLength:{type:Number,default:1/0},deep:{type:Number,default:1/0},pathCollapsible:{type:Function,default:function(){return!1}},rootPath:{type:String,default:"root"},virtual:{type:Boolean,default:!1},height:{type:Number,default:400},itemHeight:{type:Number,default:20},selectedValue:{type:[String,Array],default:function(){return""}},collapsedOnClickBrackets:{type:Boolean,default:!0},style:Object,onSelectedChange:{type:Function},theme:{type:String,default:"light"}}),slots:["renderNodeKey","renderNodeValue"],emits:["nodeClick","bracketsClick","iconClick","selectedChange","update:selectedValue","update:data"],setup:function(e,V){var _=V.emit,T=V.slots,D=(0,c.ref)(),F=(0,c.computed)(function(){return y(e.data,e.rootPath)}),M=function(O,x){return F.value.reduce(function(P,B){var A,H=B.level>=O||B.length>=x,K=(A=e.pathCollapsible)===null||A===void 0?void 0:A.call(e,B);return B.type!=="objectStart"&&B.type!=="arrayStart"||!H&&!K?P:N(N({},P),{},l({},B.path,1))},{})},L=(0,c.reactive)({translateY:0,visibleData:null,hiddenPaths:M(e.deep,e.collapsedNodeLength)}),z=(0,c.computed)(function(){for(var O=null,x=[],P=F.value.length,B=0;B<P;B++){var A=N(N({},F.value[B]),{},{id:B}),H=L.hiddenPaths[A.path];if(O&&O.path===A.path){var K=O.type==="objectStart",ee=N(N(N({},A),O),{},{showComma:A.showComma,content:K?"{...}":"[...]",type:K?"objectCollapsed":"arrayCollapsed"});O=null,x.push(ee)}else{if(H&&!O){O=A;continue}if(O)continue;x.push(A)}}return x}),$=(0,c.computed)(function(){var O=e.selectedValue;return O&&e.selectableType==="multiple"&&Array.isArray(O)?O:[O]}),Q=(0,c.computed)(function(){return!e.selectableType||e.selectOnClickNode||e.showSelectController?"":"When selectableType is not null, selectOnClickNode and showSelectController cannot be false at the same time, because this will cause the selection to fail."}),R=function(){var O=z.value;if(e.virtual){var x,P=e.height/e.itemHeight,B=((x=D.value)===null||x===void 0?void 0:x.scrollTop)||0,A=Math.floor(B/e.itemHeight),H=A<0?0:A+P>O.length?O.length-P:A;H<0&&(H=0);var K=H+P;L.translateY=H*e.itemHeight,L.visibleData=O.filter(function(ee,X){return X>=H&&X<K})}else L.visibleData=O},q=function(){R()},J=function(O){var x,P,B=O.path,A=e.selectableType;if(A==="multiple"){var H=$.value.findIndex(function(U){return U===B}),K=a($.value);H!==-1?K.splice(H,1):K.push(B),_("update:selectedValue",K),_("selectedChange",K,a($.value))}else if(A==="single"&&$.value[0]!==B){var ee=(x=$.value,P=1,function(U){if(Array.isArray(U))return U}(x)||function(U,oe){var Z=U==null?null:typeof Symbol<"u"&&U[Symbol.iterator]||U["@@iterator"];if(Z!=null){var re,ae,te=[],ne=!0,ce=!1;try{for(Z=Z.call(U);!(ne=(re=Z.next()).done)&&(te.push(re.value),!oe||te.length!==oe);ne=!0);}catch(le){ce=!0,ae=le}finally{try{ne||Z.return==null||Z.return()}finally{if(ce)throw ae}}return te}}(x,P)||r(x,P)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}())[0],X=B;_("update:selectedValue",X),_("selectedChange",X,ee)}},W=function(O){_("nodeClick",O)},Y=function(O,x){if(O)L.hiddenPaths=N(N({},L.hiddenPaths),{},l({},x,1));else{var P=N({},L.hiddenPaths);delete P[x],L.hiddenPaths=P}},G=function(O,x){e.collapsedOnClickBrackets&&Y(O,x.path),_("bracketsClick",O,x)},I=function(O,x){Y(O,x.path),_("iconClick",O,x)},E=function(O,x){var P=g(e.data),B=e.rootPath;new Function("data","val","data".concat(x.slice(B.length),"=val"))(P,O),_("update:data",P)};return(0,c.watchEffect)(function(){Q.value&&function(O){throw new Error("[VueJSONPretty] ".concat(O))}(Q.value)}),(0,c.watchEffect)(function(){z.value&&R()}),(0,c.watch)(function(){return e.deep},function(O){O&&(L.hiddenPaths=M(O,e.collapsedNodeLength))}),(0,c.watch)(function(){return e.collapsedNodeLength},function(O){O&&(L.hiddenPaths=M(e.deep,O))}),function(){var O,x,P=(O=e.renderNodeKey)!==null&&O!==void 0?O:T.renderNodeKey,B=(x=e.renderNodeValue)!==null&&x!==void 0?x:T.renderNodeValue,A=L.visibleData&&L.visibleData.map(function(H){return(0,c.createVNode)(k,{key:H.id,node:H,collapsed:!!L.hiddenPaths[H.path],theme:e.theme,showDoubleQuotes:e.showDoubleQuotes,showLength:e.showLength,checked:$.value.includes(H.path),selectableType:e.selectableType,showLine:e.showLine,showLineNumber:e.showLineNumber,showSelectController:e.showSelectController,selectOnClickNode:e.selectOnClickNode,nodeSelectable:e.nodeSelectable,highlightSelectedNode:e.highlightSelectedNode,editable:e.editable,editableTrigger:e.editableTrigger,showIcon:e.showIcon,showKeyValueSpace:e.showKeyValueSpace,renderNodeKey:P,renderNodeValue:B,onNodeClick:W,onBracketsClick:G,onIconClick:I,onSelectedChange:J,onValueChange:E,style:e.itemHeight&&e.itemHeight!==20?{lineHeight:"".concat(e.itemHeight,"px")}:{}},null)});return(0,c.createVNode)("div",{ref:D,class:{"vjs-tree":!0,"is-virtual":e.virtual,dark:e.theme==="dark"},onScroll:e.virtual?q:void 0,style:e.showLineNumber?N({paddingLeft:"".concat(12*Number(F.value.length.toString().length),"px")},e.style):e.style},[e.virtual?(0,c.createVNode)("div",{class:"vjs-tree-list",style:{height:"".concat(e.height,"px")}},[(0,c.createVNode)("div",{class:"vjs-tree-list-holder",style:{height:"".concat(z.value.length*e.itemHeight,"px")}},[(0,c.createVNode)("div",{class:"vjs-tree-list-holder-inner",style:{transform:"translateY(".concat(L.translateY,"px)")}},[A])])]):A])}}});var S=n.Z;const _hoisted_1={class:"p-jsonformat"},_hoisted_2={class:"jsonformat"},_hoisted_3={class:"label"},_hoisted_4={class:"label mt-20"},_hoisted_5={class:"json-result"},_sfc_main={__name:"jsonformat",setup(__props){const $Vjsonformat=e=>{const _=useNuxtApp().$lang.value||"zh_Hans_CN",T=$VjsonformatMessages[_]||$VjsonformatMessages.zh_Hans_CN||{};return T[e]===void 0?e:T[e]},{currentFunc}=useCurrentFunc(),jsonText=ref(""),jsonObj=computed(()=>{try{return jsonText.value?JSON.parse(jsonText.value):""}catch(error){try{return eval(`x = ${jsonText.value}`)}catch(e){}return jsonText?$Vjsonformat("非法内容"):""}}),result=computed(()=>{try{return JSON.stringify(jsonObj.value,null,4)}catch{return""}});return(e,V)=>{const _=_sfc_main$1,T=ElInput,D=_sfc_main$2;return openBlock(),createElementBlock("div",_hoisted_1,[createVNode(_,{"current-func":unref(currentFunc)},null,8,["current-func"]),createBaseVNode("div",_hoisted_2,[createBaseVNode("div",_hoisted_3,[createBaseVNode("span",null,toDisplayString($Vjsonformat("待格式化内容")),1)]),createVNode(T,{modelValue:unref(jsonText),"onUpdate:modelValue":V[0]||(V[0]=F=>isRef(jsonText)?jsonText.value=F:null),type:"textarea",placeholder:$Vjsonformat("请输入内容"),resize:"none"},null,8,["modelValue","placeholder"]),createBaseVNode("div",_hoisted_4,[createBaseVNode("span",null,toDisplayString($Vjsonformat("格式化结果")),1),createVNode(D,{msg:unref(result)},null,8,["msg"])]),createBaseVNode("div",_hoisted_5,[createVNode(unref(S),{data:unref(jsonObj),"show-length":"","show-line":"","show-line-number":"","show-icon":""},null,8,["data"])])])])}}};export{_sfc_main as default};
