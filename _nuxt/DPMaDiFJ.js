import{h as W,D as $,k as R,l as Y,q as G,n as te,r as m,I as L,z as ae,cz as A,d0 as K,a as B,c as M,w as J,Z as se,b as O,B as P,e as g,C as D,$ as le,aD as oe,cp as Z,A as Q,d as I,a8 as re,j as ne,aA as ie,T as k,aq as U,s as X,y as ce,x as q,O as ue,X as ve,ei as fe,o as de,J as me,P as pe,as as he,a0 as ye,dK as be,a1 as ge,cE as we}from"./CqK3pOxO.js";const C=4,Se={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},ze=({move:a,size:t,bar:s})=>({[s.size]:t,transform:"translate".concat(s.axis,"(").concat(a,"%)")}),j=Symbol("scrollbarContextKey"),Ee=W({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),_e="Thumb",Te=R({__name:"thumb",props:Ee,setup(a){const t=a,s=Y(j),l=G("scrollbar");s||te(_e,"can not inject scrollbar context");const i=m(),c=m(),v=m({}),f=m(!1);let p=!1,y=!1,r=Z?document.onselectstart:null;const o=L(()=>Se[t.vertical?"vertical":"horizontal"]),n=L(()=>ze({size:t.size,move:t.move,bar:o.value})),d=L(()=>i.value[o.value.offset]**2/s.wrapElement[o.value.scrollSize]/t.ratio/c.value[o.value.offset]),h=u=>{var E;if(u.stopPropagation(),u.ctrlKey||[1,2].includes(u.button))return;(E=window.getSelection())==null||E.removeAllRanges(),S(u);const H=u.currentTarget;H&&(v.value[o.value.axis]=H[o.value.offset]-(u[o.value.client]-H.getBoundingClientRect()[o.value.direction]))},T=u=>{if(!c.value||!i.value||!s.wrapElement)return;const E=Math.abs(u.target.getBoundingClientRect()[o.value.direction]-u[o.value.client]),H=c.value[o.value.offset]/2,N=(E-H)*100*d.value/i.value[o.value.offset];s.wrapElement[o.value.scroll]=N*s.wrapElement[o.value.scrollSize]/100},S=u=>{u.stopImmediatePropagation(),p=!0,document.addEventListener("mousemove",w),document.addEventListener("mouseup",b),r=document.onselectstart,document.onselectstart=()=>!1},w=u=>{if(!i.value||!c.value||p===!1)return;const E=v.value[o.value.axis];if(!E)return;const H=(i.value.getBoundingClientRect()[o.value.direction]-u[o.value.client])*-1,N=c.value[o.value.offset]-E,ee=(H-N)*100*d.value/i.value[o.value.offset];s.wrapElement[o.value.scroll]=ee*s.wrapElement[o.value.scrollSize]/100},b=()=>{p=!1,v.value[o.value.axis]=0,document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",b),e(),y&&(f.value=!1)},x=()=>{y=!1,f.value=!!t.size},z=()=>{y=!0,f.value=p};ae(()=>{e(),document.removeEventListener("mouseup",b)});const e=()=>{document.onselectstart!==r&&(document.onselectstart=r)};return A(K(s,"scrollbarElement"),"mousemove",x),A(K(s,"scrollbarElement"),"mouseleave",z),(u,E)=>(B(),M(oe,{name:g(l).b("fade"),persisted:""},{default:J(()=>[se(O("div",{ref_key:"instance",ref:i,class:P([g(l).e("bar"),g(l).is(g(o).key)]),onMousedown:T},[O("div",{ref_key:"thumb",ref:c,class:P(g(l).e("thumb")),style:D(g(n)),onMousedown:h},null,38)],34),[[le,u.always||f.value]])]),_:1},8,["name"]))}});var F=$(Te,[["__file","thumb.vue"]]);const He=W({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),Ce=R({__name:"bar",props:He,setup(a,{expose:t}){const s=a,l=Y(j),i=m(0),c=m(0),v=m(""),f=m(""),p=m(1),y=m(1);return t({handleScroll:n=>{if(n){const d=n.offsetHeight-C,h=n.offsetWidth-C;c.value=n.scrollTop*100/d*p.value,i.value=n.scrollLeft*100/h*y.value}},update:()=>{const n=l==null?void 0:l.wrapElement;if(!n)return;const d=n.offsetHeight-C,h=n.offsetWidth-C,T=d**2/n.scrollHeight,S=h**2/n.scrollWidth,w=Math.max(T,s.minSize),b=Math.max(S,s.minSize);p.value=T/(d-T)/(w/(d-w)),y.value=S/(h-S)/(b/(h-b)),f.value=w+C<d?"".concat(w,"px"):"",v.value=b+C<h?"".concat(b,"px"):""}}),(n,d)=>(B(),Q(re,null,[I(F,{move:i.value,ratio:y.value,size:v.value,always:n.always},null,8,["move","ratio","size","always"]),I(F,{move:c.value,ratio:p.value,size:f.value,vertical:"",always:n.always},null,8,["move","ratio","size","always"])],64))}});var Le=$(Ce,[["__file","bar.vue"]]);const ke=W({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:ne([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},id:String,role:String,...ie(["ariaLabel","ariaOrientation"])}),Be={scroll:({scrollTop:a,scrollLeft:t})=>[a,t].every(k)},Pe="ElScrollbar",Re=R({name:Pe}),xe=R({...Re,props:ke,emits:Be,setup(a,{expose:t,emit:s}){const l=a,i=G("scrollbar");let c,v,f=0,p=0;const y=m(),r=m(),o=m(),n=m(),d=L(()=>{const e={};return l.height&&(e.height=U(l.height)),l.maxHeight&&(e.maxHeight=U(l.maxHeight)),[l.wrapStyle,e]}),h=L(()=>[l.wrapClass,i.e("wrap"),{[i.em("wrap","hidden-default")]:!l.native}]),T=L(()=>[i.e("view"),l.viewClass]),S=()=>{var e;r.value&&((e=n.value)==null||e.handleScroll(r.value),f=r.value.scrollTop,p=r.value.scrollLeft,s("scroll",{scrollTop:r.value.scrollTop,scrollLeft:r.value.scrollLeft}))};function w(e,u){be(e)?r.value.scrollTo(e):k(e)&&k(u)&&r.value.scrollTo(e,u)}const b=e=>{k(e)&&(r.value.scrollTop=e)},x=e=>{k(e)&&(r.value.scrollLeft=e)},z=()=>{var e;(e=n.value)==null||e.update()};return X(()=>l.noresize,e=>{e?(c==null||c(),v==null||v()):({stop:c}=ce(o,z),v=A("resize",z))},{immediate:!0}),X(()=>[l.maxHeight,l.height],()=>{l.native||q(()=>{var e;z(),r.value&&((e=n.value)==null||e.handleScroll(r.value))})}),ue(j,ve({scrollbarElement:y,wrapElement:r})),fe(()=>{r.value.scrollTop=f,r.value.scrollLeft=p}),de(()=>{l.native||q(()=>{z()})}),me(()=>z()),t({wrapRef:r,update:z,scrollTo:w,setScrollTop:b,setScrollLeft:x,handleScroll:S}),(e,u)=>(B(),Q("div",{ref_key:"scrollbarRef",ref:y,class:P(g(i).b())},[O("div",{ref_key:"wrapRef",ref:r,class:P(g(h)),style:D(g(d)),onScroll:S},[(B(),M(he(e.tag),{id:e.id,ref_key:"resizeRef",ref:o,class:P(g(T)),style:D(e.viewStyle),role:e.role,"aria-label":e.ariaLabel,"aria-orientation":e.ariaOrientation},{default:J(()=>[pe(e.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],38),e.native?ye("v-if",!0):(B(),M(Le,{key:0,ref_key:"barRef",ref:n,always:e.always,"min-size":e.minSize},null,8,["always","min-size"]))],2))}});var Ne=$(xe,[["__file","scrollbar.vue"]]);const Me=ge(Ne),_=new Map;if(Z){let a;document.addEventListener("mousedown",t=>a=t),document.addEventListener("mouseup",t=>{if(a){for(const s of _.values())for(const{documentHandler:l}of s)l(t,a);a=void 0}})}function V(a,t){let s=[];return Array.isArray(t.arg)?s=t.arg:we(t.arg)&&s.push(t.arg),function(l,i){const c=t.instance.popperRef,v=l.target,f=i==null?void 0:i.target,p=!t||!t.instance,y=!v||!f,r=a.contains(v)||a.contains(f),o=a===v,n=s.length&&s.some(h=>h==null?void 0:h.contains(v))||s.length&&s.includes(f),d=c&&(c.contains(v)||c.contains(f));p||y||r||o||n||d||t.value(l,i)}}const Oe={beforeMount(a,t){_.has(a)||_.set(a,[]),_.get(a).push({documentHandler:V(a,t),bindingFn:t.value})},updated(a,t){_.has(a)||_.set(a,[]);const s=_.get(a),l=s.findIndex(c=>c.bindingFn===t.oldValue),i={documentHandler:V(a,t),bindingFn:t.value};l>=0?s.splice(l,1,i):s.push(i)},unmounted(a){_.delete(a)}};export{Oe as C,Me as E};
